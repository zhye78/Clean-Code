# Chapter 9 - 단위 테스트

## TDD 법칙 세 가지

1. 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다.
2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다.
3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다.

## 깨끗한 테스트 코드 유지하기

 테스트 코드는 실제 코드 못지 않게 중요하며, 실제 코드 못지 않게 깨끗하게 짜야 한다.
 코드에 유연성, 유지보수성, 재사용성을 제공하는 것은 바로 **단위 테스트**이다. (단위)테스트 코드를 짠다는 것은 테스트 케이스가 함께 준비된다는 것이기 때문이다.

 ## 깨끗한 테스트 코드

  깨끗한 테스트 코드를 만들 때 **가독성**이 가장 중요하다.

1. 도메인에 특화된 테스트 언어 </br>
흔히 쓰는 시스템 조작 API 대신 API 위에다 함수와 유틸리티 구현 후 그 함수와 유틸리티 사용
2. 이중 표준 </br>
테스트 코드의 표준은 실제 환경이 아닌 테스트 환경에서 돌아가는 코드이기 때문에 실제 표준과 다르다. 실제 환경에서는 절대 안되지만 테스트 환경에서는 전혀 문제없는 방식이 있는데, 이것은 코드의 깨끗함과는 철저히 무관하다.

## 테스트 당 assert 하나

JUnit 으로 테스트 코드를 짤 때는 함수마다 assert 문을 단 하나만 사용해야 한다는 주장이 있다. assert가 단 하나여야 함수의 결론이 하나가 되기 때문에 코드를 이해하기가 쉽고 빠르다는 이유이다.
- 테스트 당 개념 하나</br>
이 경우에는 하나의 함수에 여러 assert 문이 들어갈 수 있지만 바람직하다고 간주한다. </br>
-> 가장 좋은 규칙은 **개념 당 assert 문 수를 최소로 줄이고, 테스트 함수 하나는 개념 하나만 테스트하라** 이다.

## F.I.R.S.T

깨끗한 테스트의 다섯 가지 규칙
1. 빠르게(Fast) : 테스트는 빨라야 한다.
2. 독립적으로(Independent) : 각 테스트는 서로 의존하면 안 된다.
3. 반복 가능하게(Repeatable) : 테스트는 어떤 환경에서도 반복 가능해야 한다.
4. 자가검증하는(Self-Validationg) : 테스트는 부울값으로 결과를 내야 한다.
5. 적시에(Timely) : 테스트는 적시에 작성해야 한다.

## 결론

 테스트 코드가 방치되어 망가지면 실제 코드도 망가진다. 테스트 코드를 깨끗하게 유지하자.