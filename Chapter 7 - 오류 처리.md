# Chapter 7 - 오류 처리

깨끗한 코드와 오류 처리는 확실히 연관성이 있어 중요하다. 하지만 오류 처리로 인해 프로그램 논리를 이해하기 어려워진다면 깨끗한 코드라 부르기 어렵다.

### 오류 코드보다 예외를 사용하라

 예외를 지원하지 않는 언어에서는 오류 플래그를 설정하거나 호출자에게 오류 코드를 반환하는데, 이 방법은 프로그램의 논리가 오류 처리 코드와 뒤섞이기 때문에 좋지 않다. 

 → 예외 처리를 사용하자!

### Try-Catch-Finally

 예외가 발생할 코드를 짤 때에는 try-catch-finally 문으로 시작해야 try블록에서 무슨 일이 생기든지 호출자가 기대하는 상태를 정의하기 쉬워진다.

### 미확인(Unchecked) 예외를 사용하라

 초기에는 확인된 예외가 멋진 아이디어로 여겨졌지만, 여러 해 동안 이어진 자바 프로그래머들의 논쟁 끝에 확인된 예외가 필수적이지 않다는 결론이 나왔다.

 확인된 예외는 컴파일 시점에 처리할 수 있는 장점이 있지만, 상위 함수들이 하위 함수들의 예외를 전부 알아야 하고, 하위 단계의 예외 선언부가 변경되면 상위 단계 선언부를 모두 고쳐야 하므로 OCP를 위반하고 캡슐화가 깨진다는 치명적인 단점도 있다.

-확인된 예외 Ex) IOException, SQLException ...

-미확인 예외 Ex) NUllPointerException, IndexOutOfBoundsException ...

### 예외에 의미를 제공하라

 오류 메시지에 정보를 담아 예외와 함께 던지며, 실패한 연산 이름과 실패 유형을 함께 언급해준다. 로그를 남기는 것도 좋은 방법.

### 호출자를 고려해 예외 클래스를 정의하라

 외부 라이브러리 API를 감싸는 Wrapper 클래스를 정의해서 그 API가 던지는 예외들을 하나의 예외 유형으로 한 번에 처리한다.

-외부 라이브러리와 프로그램 사이에서 의존성이 크게 줄어든다.

-라이브러리 변경에 비용이 줄어든다.

-프로그램 테스트가 쉬워진다.

### 정상 흐름을 정의하라

 클래스를 만들거나 객체를 조작하여 특수 사례를 처리하는 방식을 **특수 사례 패턴**이라 부른다.

 예외가 발생할 상황을 만들지 않으면, 예외를 처리할 필요도 없어진다.

### null을 반환하지 마라

 null을 처리할 부분이 많다면 그것은 나쁜 코드다! null을 반환하고싶다면 그 대신 예외를 던지거나 특수 사레 객체를 반환하도록 하자. 많은 경우에 특수 사례 객체가 손쉬운 해결책이 된다.

### null을 전달하지 마라

 메서드의 인수로 null을 전달하는 방식이 null 반환보다 더 나쁘다. 인수로 null이 넘어오면 그 코드에는 문제가 있다.

### 결론

 깨끗한 코드는 읽기도 좋아야 하지만 안정성도 높아야 한다. 오류 처리를 프로그램 논리와 분리하면 튼튼하고 꺠끗한 코드가 되며, 유지보수성도 높아진다.